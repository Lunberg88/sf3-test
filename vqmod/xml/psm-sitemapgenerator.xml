<modification><id><![CDATA[Paladin SEO - Sitemap generator]]></id><version>1.7.0</version><vqmver>1.0.0</vqmver><author><![CDATA[ ROMAN TYMKIV  ]]></author>	<file name="admin/model/catalog/product.php">			<operation error="skip"> 				<search position="after"><![CDATA[ $this->cache->delete('product'); ]]></search>				<add><![CDATA[								require_once DIR_CONFIG .'psm_library/gen_sitemap/front_manager.php';				$this->frontManager = frontManager::getInstance();				$sm_setting = $this->frontManager->getSetting();				if($sm_setting){					include_once DIR_CONFIG .'psm_library/gen_sitemap/sitemap_generator.php';					$siteMapGenerator = sitemap_generator::getInstance();					$siteMapGenerator->autoGenerate('product', $product_id);				}							]]>	</add>			</operation></file>	<file name="admin/model/catalog/category.php">	<operation error="skip">	<search position="after"><![CDATA[ $this->cache->delete('category'); ]]></search>	<add><![CDATA[								require_once DIR_CONFIG .'psm_library/gen_sitemap/front_manager.php';				$this->frontManager = frontManager::getInstance();					$sm_setting = $this->frontManager->getSetting();	if($sm_setting){							include_once DIR_CONFIG .'psm_library/gen_sitemap/sitemap_generator.php';		$siteMapGenerator = sitemap_generator::getInstance();					$siteMapGenerator->autoGenerate('category', $category_id);	}								]]>	</add>			</operation>			</file>	<file name="admin/model/catalog/manufacturer.php">			<operation  error="skip"> 				<search position="after"><![CDATA[ $this->cache->delete('manufacturer'); ]]></search>	<add><![CDATA[								require_once DIR_CONFIG .'psm_library/gen_sitemap/front_manager.php';				$this->frontManager = frontManager::getInstance();				$sm_setting = $this->frontManager->getSetting();				if($sm_setting){					include_once DIR_CONFIG .'psm_library/gen_sitemap/sitemap_generator.php';					$siteMapGenerator = sitemap_generator::getInstance();					$siteMapGenerator->autoGenerate('brand', $manufacturer_id);				} 							]]>	</add>			</operation>		</file><file name="admin/model/catalog/information.php">			<operation> 				<search position="after"><![CDATA[ $this->cache->delete('information'); ]]></search>		<add><![CDATA[								require_once DIR_CONFIG .'psm_library/gen_sitemap/front_manager.php';				$this->frontManager = frontManager::getInstance();				$sm_setting = $this->frontManager->getSetting();				if($sm_setting){					include_once DIR_CONFIG .'psm_library/gen_sitemap/sitemap_generator.php';					$siteMapGenerator = sitemap_generator::getInstance();					$siteMapGenerator->autoGenerate('info', $information_id);				} 							]]>	</add>			</operation>			</file>	<file name="system/config/ssb_library/catalog/controller/feed/ssb_site_map.php">	<operation error = "skip">				<search position="after">			<![CDATA[public function index() {]]>			</search>	<add>			<![CDATA[			/**off Paladfin tool - sitemap improve START**/			return;			/**off Paladfin tool - sitemap improve END**/			]]>				</add>		</operation>	</file>		<file name="catalog/controller/common/seo_url.php">			<operation error = "skip">				<search position="after"><![CDATA[parse_str($url_info['query'], $data);]]></search>				<add><![CDATA[				if(isset($_SESSION['siteGenerate'])){						require_once DIR_CONFIG .'psm_library/gen_sitemap/front_manager.php';		$frontManager = frontManager::getInstance();										$sg_setting = $frontManager->getSetting('entity');														$page_type = '';		$path_mode = 'default';		if(isset($data['route']) && $data['route'] == 'product/product' && isset($data['product_id'])){			$path_mode = $sg_setting['sitemap']['product']['setting']['mode'];			$page_type = 'product';			$product_id = $data['product_id'];		}else if(isset($data['path'])){			$path_mode = $sg_setting['sitemap']['category']['setting']['mode'];			$page_type = 'category';		}				if($path_mode == 'direct'){			switch ($page_type) {				case 'product':					unset($data['path']);					break;				case 'category':					$categories = explode('_', $data['path']);					$category_id = $categories[count($categories)-1];					if(isset($data['path'])){						$data['path'] = $category_id;					}else{						$data = array('path' => $category_id) + $data;					}					break;			}		}else if($path_mode != 'default'){			require_once DIR_CONFIG .'psm_library/gen_sitemap/path_controller.php';			$this->pathController = pathController::getInstance();			switch ($page_type) {				case 'product':					$new_path = $this->pathController->getProductPath($product_id, $path_mode);					if(count($new_path)){						if(isset($data['path'])){							$data['path'] = $new_path[count($new_path)-1]['path'];						}else{							$data = array('path' => $new_path[count($new_path)-1]['path']) + $data;						}					}					break;				case 'category':					$categories = explode('_', $data['path']);					$category_id = $categories[count($categories)-1];					$new_path = $this->pathController->getCaregoryPath($category_id, $path_mode);					if(isset($data['path'])){						$data['path'] = $new_path[count($new_path)-1]['path'];					}else{						$data = array('path' => $new_path[count($new_path)-1]['path']) + $data;					}					break;			}		}	}			]]></add>			</operation>		</file>	<file name="catalog/controller/common/seo_url.php">			<operation error = "skip">				<search position="after"><![CDATA[parse_str($url_data['query'], $data);]]></search>				<add><![CDATA[				if(isset($_SESSION['siteGenerate'])){						require_once DIR_CONFIG .'psm_library/gen_sitemap/front_manager.php';		$frontManager = frontManager::getInstance();										$sg_setting = $frontManager->getSetting('entity');														$page_type = '';		$path_mode = 'default';		if(isset($data['route']) && $data['route'] == 'product/product' && isset($data['product_id'])){			$path_mode = $sg_setting['sitemap']['product']['setting']['mode'];			$page_type = 'product';			$product_id = $data['product_id'];		}else if(isset($data['path'])){			$path_mode = $sg_setting['sitemap']['category']['setting']['mode'];			$page_type = 'category';		}				if($path_mode == 'direct'){			switch ($page_type) {				case 'product':					unset($data['path']);					break;				case 'category':					$categories = explode('_', $data['path']);					$category_id = $categories[count($categories)-1];					if(isset($data['path'])){						$data['path'] = $category_id;					}else{						$data = array('path' => $category_id) + $data;					}					break;			}		}else if($path_mode != 'default'){			require_once DIR_CONFIG .'psm_library/gen_sitemap/path_controller.php';			$this->pathController = pathController::getInstance();			switch ($page_type) {				case 'product':					$new_path = $this->pathController->getProductPath($product_id, $path_mode);					if(count($new_path)){						if(isset($data['path'])){							$data['path'] = $new_path[count($new_path)-1]['path'];						}else{							$data = array('path' => $new_path[count($new_path)-1]['path']) + $data;						}					}					break;				case 'category':					$categories = explode('_', $data['path']);					$category_id = $categories[count($categories)-1];					$new_path = $this->pathController->getCaregoryPath($category_id, $path_mode);					if(isset($data['path'])){						$data['path'] = $new_path[count($new_path)-1]['path'];					}else{						$data = array('path' => $new_path[count($new_path)-1]['path']) + $data;					}					break;			}		}	}			]]></add>			</operation>		</file>		<file name="admin/view/template/common/header.tpl">					<operation>							<search position="after"><![CDATA[<li><a href="<?php echo $module; ?>"><?php echo $text_module; ?></a></li>]]></search>							<add><![CDATA[						<?php 			require_once DIR_CONFIG .'psm_library/gen_sitemap/front_manager.php';			$frontManager = frontManager::getInstance();						if(!$frontManager->isPaladin()){ ?>							<li><a href="<?php echo $this->url->link('module/psmsitemapgenerator', 'token=' . $this->session->data['token'], 'SSL'); ?>">PSM - Sitemap Generator</a></li>			<?php } ?>			]]>				</add>					</operation>				</file>	</modification>